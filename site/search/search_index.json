{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"MCP Dota 2 Match Analysis Server","text":"<p>A Model Context Protocol (MCP) server that gives LLMs the ability to analyze Dota 2 matches by parsing replay files and querying the OpenDota API.</p>"},{"location":"#what-this-does","title":"What This Does","text":"<p>This server exposes tools and resources that an LLM can call to answer questions about Dota 2 matches:</p> <ul> <li>\"Why did we lose the teamfight at 25 minutes?\"</li> <li>\"How did the enemy Anti-Mage get such a fast Battle Fury?\"</li> <li>\"When did Roshan die and who took the Aegis?\"</li> <li>\"Show me what happened when I died at minute 12\"</li> </ul> <p>The LLM reads the replay data and provides analysis based on actual game events, not guesswork.</p>"},{"location":"#how-mcp-works","title":"How MCP Works","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   LLM Client    \u2502 \u2500\u2500MCP\u2500\u2500 \u2502   This Server   \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u25b8 \u2502  Replay Parser  \u2502\n\u2502 (Claude, GPT)   \u2502         \u2502                 \u2502         \u2502  OpenDota API   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502                           \u2502\n         \u2502   \"Analyze match 123\"     \u2502\n         \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b8\u2502\n         \u2502                           \u2502\n         \u2502                           \u2502\u2500\u2500 calls get_hero_deaths(123)\n         \u2502                           \u2502\u2500\u2500 calls get_combat_log(123, ...)\n         \u2502                           \u2502\u2500\u2500 calls get_objective_kills(123)\n         \u2502                           \u2502\n         \u2502   structured JSON data    \u2502\n         \u2502 \u25c2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502\n         \u2502                           \u2502\n         \u25bc                           \u25bc\n   LLM synthesizes response: \"The fight was lost because...\"\n</code></pre> <p>Resources = Static data the LLM can reference (hero list, map positions) Tools = Functions the LLM can call with parameters (get deaths, get combat log)</p>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#1-install","title":"1. Install","text":"<pre><code>git clone https://github.com/DeepBlueCoding/mcp_replay_dota2.git\ncd mcp_replay_dota2\nuv sync\n</code></pre>"},{"location":"#2-connect-to-your-llm","title":"2. Connect to Your LLM","text":"<p>See Integrations for setup with:</p> <ul> <li>Claude Desktop</li> <li>Claude Code CLI</li> <li>OpenAI + LangChain</li> <li>Custom Python clients</li> </ul>"},{"location":"#3-ask-questions","title":"3. Ask Questions","text":"<p>Once connected, just ask naturally:</p> <p>\"Analyze match 8461956309. Why did Radiant lose?\"</p> <p>The LLM will automatically call the appropriate tools and synthesize an analysis.</p>"},{"location":"#available-tools","title":"Available Tools","text":"Tool What It Does <code>get_hero_deaths</code> All deaths with killer, victim, ability used <code>get_combat_log</code> Damage events, abilities, modifiers in a time range <code>get_fight_combat_log</code> Auto-detects fight boundaries around a death <code>get_item_purchases</code> When each item was bought <code>get_objective_kills</code> Roshan, towers, barracks timings <code>get_match_timeline</code> Net worth, XP, KDA over time <code>get_stats_at_minute</code> Snapshot of all players at a specific minute <code>get_courier_kills</code> Courier snipes with position"},{"location":"#available-resources","title":"Available Resources","text":"URI Data <code>dota2://heroes/all</code> All 124 heroes with attributes <code>dota2://map</code> Tower, camp, rune, landmark positions <code>dota2://match/{id}/heroes</code> 10 heroes in match with stats <code>dota2://match/{id}/players</code> 10 players with names and heroes"},{"location":"#example-conversations","title":"Example Conversations","text":"<p>See Use Cases for detailed examples:</p> <ul> <li>Analyzing why a teamfight was lost</li> <li>Tracking a carry's item timings</li> <li>Understanding a gank that went wrong</li> <li>Comparing laning phase performance</li> </ul>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p>"},{"location":"changelog/#unreleased","title":"[Unreleased]","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>MCP Resources: <code>dota2://heroes/all</code>, <code>dota2://map</code>, <code>dota2://match/{match_id}/heroes</code>, <code>dota2://match/{match_id}/players</code></li> <li>MCP Tools: <code>get_match_timeline</code>, <code>get_stats_at_minute</code>, <code>get_hero_deaths</code>, <code>get_combat_log</code>, <code>get_fight_combat_log</code>, <code>get_item_purchases</code>, <code>get_courier_kills</code>, <code>get_objective_kills</code></li> <li>Map data with tower, barracks, neutral camp, rune, and landmark positions</li> <li>Combat log parsing with fight detection</li> <li>Timeline parsing from replay metadata</li> <li>Hero fuzzy search for name matching</li> <li>MkDocs documentation with Material theme</li> </ul>"},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>N/A</li> </ul>"},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>N/A</li> </ul>"},{"location":"api/resources/","title":"Resources Reference","text":"<p>Resources are static data the LLM can include as context. Access via URI.</p>"},{"location":"api/resources/#dota2heroesall","title":"dota2://heroes/all","text":"<p>All 124+ Dota 2 heroes.</p> <pre><code>{\n  \"npc_dota_hero_antimage\": {\n    \"hero_id\": 1,\n    \"canonical_name\": \"Anti-Mage\",\n    \"aliases\": [\"am\", \"antimage\", \"anti-mage\"],\n    \"attribute\": \"agility\",\n    \"attack_type\": \"melee\",\n    \"roles\": [\"Carry\", \"Escape\", \"Nuker\"]\n  },\n  \"npc_dota_hero_axe\": {\n    \"hero_id\": 2,\n    \"canonical_name\": \"Axe\",\n    \"attribute\": \"strength\"\n  }\n}\n</code></pre> <p>Use for: Hero name resolution, attribute lookups, role classification.</p>"},{"location":"api/resources/#dota2map","title":"dota2://map","text":"<p>Full map geometry - towers, camps, runes, landmarks.</p> <pre><code>{\n  \"towers\": [\n    {\"name\": \"radiant_t1_mid\", \"team\": \"radiant\", \"tier\": 1, \"lane\": \"mid\", \"x\": -1544, \"y\": -1408},\n    {\"name\": \"dire_t1_mid\", \"team\": \"dire\", \"tier\": 1, \"lane\": \"mid\", \"x\": 524, \"y\": 652}\n  ],\n  \"barracks\": [\n    {\"name\": \"radiant_melee_mid\", \"team\": \"radiant\", \"lane\": \"mid\", \"type\": \"melee\", \"x\": -4672, \"y\": -4016}\n  ],\n  \"neutral_camps\": [\n    {\"name\": \"radiant_small_camp_1\", \"tier\": \"small\", \"side\": \"radiant\", \"x\": -3200, \"y\": -400}\n  ],\n  \"runes\": [\n    {\"type\": \"power\", \"location\": \"top\", \"x\": -1792, \"y\": 1232},\n    {\"type\": \"bounty\", \"location\": \"radiant_jungle\", \"x\": -4096, \"y\": -1664}\n  ],\n  \"landmarks\": [\n    {\"name\": \"roshan_pit\", \"x\": -2432, \"y\": 2016},\n    {\"name\": \"radiant_ancient\", \"x\": -6144, \"y\": -6016}\n  ]\n}\n</code></pre> <p>Coordinate system: - Center of map \u2248 (0, 0) - Radiant base = bottom-left (negative X, negative Y) - Dire base = top-right (positive X, positive Y) - Range: roughly -8000 to +8000</p> <p>Use for: Understanding death positions, analyzing rotations, tower/rax context.</p>"},{"location":"api/resources/#dota2matchmatch_idheroes","title":"dota2://match/{match_id}/heroes","text":"<p>The 10 heroes in a specific match with performance data.</p> <pre><code>dota2://match/8461956309/heroes\n</code></pre> <pre><code>{\n  \"heroes\": [\n    {\n      \"hero_id\": 1,\n      \"hero_name\": \"npc_dota_hero_antimage\",\n      \"localized_name\": \"Anti-Mage\",\n      \"team\": \"dire\",\n      \"player_name\": \"SteamUser123\",\n      \"pro_name\": null,\n      \"kills\": 8,\n      \"deaths\": 3,\n      \"assists\": 5,\n      \"last_hits\": 412,\n      \"gpm\": 652,\n      \"xpm\": 598,\n      \"net_worth\": 24500,\n      \"hero_damage\": 18200,\n      \"lane\": \"safelane\",\n      \"role\": \"core\",\n      \"items\": [\"item_manta\", \"item_bfury\", \"item_basher\", \"item_heart\", \"item_butterfly\", \"item_travel_boots\"],\n      \"neutral_item\": \"item_mind_breaker\"\n    }\n  ]\n}\n</code></pre> <p>Use for: Match context, hero matchups, team composition analysis.</p>"},{"location":"api/resources/#dota2matchmatch_idplayers","title":"dota2://match/{match_id}/players","text":"<p>Player info for a match.</p> <pre><code>dota2://match/8461956309/players\n</code></pre> <pre><code>{\n  \"players\": [\n    {\n      \"account_id\": 123456789,\n      \"player_name\": \"SteamUser123\",\n      \"pro_name\": null,\n      \"team\": \"dire\",\n      \"hero_id\": 1,\n      \"hero_name\": \"npc_dota_hero_antimage\",\n      \"localized_name\": \"Anti-Mage\"\n    }\n  ]\n}\n</code></pre> <p>Use for: Identifying players, looking up pros, correlating with external data.</p>"},{"location":"api/tools/","title":"Tools Reference","text":"<p>Tools are functions the LLM can call. All tools take <code>match_id</code> as required parameter.</p>"},{"location":"api/tools/#get_hero_deaths","title":"get_hero_deaths","text":"<p>All hero deaths in the match.</p> <pre><code>get_hero_deaths(match_id=8461956309)\n</code></pre> <p>Returns: <pre><code>{\n  \"total_deaths\": 45,\n  \"deaths\": [\n    {\n      \"game_time\": 288,\n      \"game_time_str\": \"4:48\",\n      \"victim\": \"earthshaker\",\n      \"killer\": \"disruptor\",\n      \"killer_is_hero\": true,\n      \"ability\": \"disruptor_thunder_strike\",\n      \"position\": {\"x\": 4200, \"y\": 1800, \"region\": \"dire_safelane\", \"location\": \"Dire safelane near tower\"}\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api/tools/#get_combat_log","title":"get_combat_log","text":"<p>Raw combat events with optional filters.</p> <pre><code>get_combat_log(\n    match_id=8461956309,\n    start_time=280,      # optional: filter by time range\n    end_time=300,\n    hero_filter=\"earthshaker\"  # optional: only events involving this hero\n)\n</code></pre> <p>Returns: <pre><code>{\n  \"events\": [\n    {\n      \"type\": \"DAMAGE\",\n      \"game_time\": 285,\n      \"game_time_str\": \"4:45\",\n      \"attacker\": \"disruptor\",\n      \"attacker_is_hero\": true,\n      \"target\": \"earthshaker\",\n      \"target_is_hero\": true,\n      \"ability\": \"disruptor_thunder_strike\",\n      \"value\": 160\n    }\n  ]\n}\n</code></pre></p> <p>Event types: <code>DAMAGE</code>, <code>MODIFIER_ADD</code>, <code>MODIFIER_REMOVE</code>, <code>ABILITY</code>, <code>ITEM</code>, <code>DEATH</code>, <code>HEAL</code></p>"},{"location":"api/tools/#get_fight_combat_log","title":"get_fight_combat_log","text":"<p>Auto-detects fight boundaries around a reference time. Use this to analyze what happened leading up to a death.</p> <pre><code>get_fight_combat_log(\n    match_id=8461956309,\n    reference_time=288,    # e.g., death time\n    hero=\"earthshaker\"     # optional: anchor detection to this hero\n)\n</code></pre> <p>Returns: <pre><code>{\n  \"fight_start\": 280,\n  \"fight_end\": 295,\n  \"fight_start_str\": \"4:40\",\n  \"fight_end_str\": \"4:55\",\n  \"duration\": 15,\n  \"participants\": [\"earthshaker\", \"disruptor\", \"naga_siren\", \"medusa\"],\n  \"total_events\": 47,\n  \"events\": [...]\n}\n</code></pre></p>"},{"location":"api/tools/#get_item_purchases","title":"get_item_purchases","text":"<p>When items were bought.</p> <pre><code>get_item_purchases(\n    match_id=8461956309,\n    hero_filter=\"antimage\"  # optional\n)\n</code></pre> <p>Returns: <pre><code>{\n  \"purchases\": [\n    {\"game_time\": -89, \"game_time_str\": \"-1:29\", \"hero\": \"antimage\", \"item\": \"item_tango\"},\n    {\"game_time\": 540, \"game_time_str\": \"9:00\", \"hero\": \"antimage\", \"item\": \"item_bfury\"}\n  ]\n}\n</code></pre></p> <p>Negative times = purchased before horn (0:00).</p>"},{"location":"api/tools/#get_objective_kills","title":"get_objective_kills","text":"<p>Roshan, tormentor, towers, barracks.</p> <pre><code>get_objective_kills(match_id=8461956309)\n</code></pre> <p>Returns: <pre><code>{\n  \"roshan_kills\": [\n    {\"game_time\": 1392, \"game_time_str\": \"23:12\", \"killer\": \"medusa\", \"team\": \"dire\", \"kill_number\": 1}\n  ],\n  \"tormentor_kills\": [\n    {\"game_time\": 1215, \"game_time_str\": \"20:15\", \"killer\": \"medusa\", \"team\": \"dire\", \"side\": \"dire\"}\n  ],\n  \"tower_kills\": [\n    {\"game_time\": 669, \"game_time_str\": \"11:09\", \"tower\": \"dire_t1_mid\", \"team\": \"dire\", \"tier\": 1, \"lane\": \"mid\", \"killer\": \"nevermore\"}\n  ],\n  \"barracks_kills\": [\n    {\"game_time\": 2373, \"game_time_str\": \"39:33\", \"barracks\": \"radiant_melee_mid\", \"team\": \"radiant\", \"lane\": \"mid\", \"type\": \"melee\", \"killer\": \"medusa\"}\n  ]\n}\n</code></pre></p>"},{"location":"api/tools/#get_match_timeline","title":"get_match_timeline","text":"<p>Net worth, XP, KDA over time for all players.</p> <pre><code>get_match_timeline(match_id=8461956309)\n</code></pre> <p>Returns: <pre><code>{\n  \"players\": [\n    {\n      \"hero\": \"antimage\",\n      \"team\": \"dire\",\n      \"net_worth\": [500, 800, 1200, ...],  // every 30 seconds\n      \"hero_damage\": [0, 0, 150, ...],\n      \"kda_timeline\": [\n        {\"game_time\": 0, \"kills\": 0, \"deaths\": 0, \"assists\": 0, \"level\": 1},\n        {\"game_time\": 300, \"kills\": 0, \"deaths\": 0, \"assists\": 0, \"level\": 5}\n      ]\n    }\n  ],\n  \"team_graphs\": {\n    \"radiant_xp\": [0, 1200, 2500, ...],\n    \"dire_xp\": [0, 1100, 2400, ...],\n    \"radiant_gold\": [0, 600, 1300, ...],\n    \"dire_gold\": [0, 650, 1400, ...]\n  }\n}\n</code></pre></p>"},{"location":"api/tools/#get_stats_at_minute","title":"get_stats_at_minute","text":"<p>Snapshot of all players at a specific minute.</p> <pre><code>get_stats_at_minute(match_id=8461956309, minute=10)\n</code></pre> <p>Returns: <pre><code>{\n  \"minute\": 10,\n  \"players\": [\n    {\n      \"hero\": \"antimage\",\n      \"team\": \"dire\",\n      \"net_worth\": 5420,\n      \"last_hits\": 78,\n      \"denies\": 8,\n      \"kills\": 0,\n      \"deaths\": 0,\n      \"assists\": 0,\n      \"level\": 10,\n      \"hero_damage\": 450\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api/tools/#get_courier_kills","title":"get_courier_kills","text":"<p>Courier snipes.</p> <pre><code>get_courier_kills(match_id=8461956309)\n</code></pre> <p>Returns: <pre><code>{\n  \"kills\": [\n    {\n      \"game_time\": 420,\n      \"game_time_str\": \"7:00\",\n      \"killer\": \"bounty_hunter\",\n      \"killer_is_hero\": true,\n      \"owner\": \"antimage\",\n      \"team\": \"dire\",\n      \"position\": {\"x\": 2100, \"y\": -1500, \"region\": \"river\", \"location\": \"River near Radiant outpost\"}\n    }\n  ]\n}\n</code></pre></p>"},{"location":"examples/use-cases/","title":"Real Use Cases","text":"<p>These are example conversations showing how an LLM uses the MCP tools to analyze matches.</p>"},{"location":"examples/use-cases/#analyzing-a-lost-teamfight","title":"Analyzing a Lost Teamfight","text":"<p>User: \"In match 8461956309, we lost a big fight around 25 minutes. What went wrong?\"</p> <p>LLM thinks: I need to find deaths around minute 25 and analyze the fight.</p> <p>LLM calls: <code>get_hero_deaths(match_id=8461956309)</code></p> <p>Tool returns: <pre><code>{\n  \"deaths\": [\n    {\"game_time\": 1487, \"game_time_str\": \"24:47\", \"victim\": \"pangolier\", \"killer\": \"medusa\", \"ability\": \"medusa_split_shot\"},\n    {\"game_time\": 1492, \"game_time_str\": \"24:52\", \"victim\": \"earthshaker\", \"killer\": \"disruptor\", \"ability\": \"disruptor_static_storm\"},\n    {\"game_time\": 1495, \"game_time_str\": \"24:55\", \"victim\": \"nevermore\", \"killer\": \"naga_siren\", \"ability\": \"naga_siren_rip_tide\"},\n    {\"game_time\": 1498, \"game_time_str\": \"24:58\", \"victim\": \"dawnbreaker\", \"killer\": \"medusa\", \"ability\": \"medusa_mystic_snake\"}\n  ]\n}\n</code></pre></p> <p>LLM calls: <code>get_fight_combat_log(match_id=8461956309, reference_time=1492, hero=\"earthshaker\")</code></p> <p>Tool returns: <pre><code>{\n  \"fight_start\": 1480,\n  \"fight_end\": 1502,\n  \"duration\": 22,\n  \"participants\": [\"pangolier\", \"earthshaker\", \"nevermore\", \"dawnbreaker\", \"medusa\", \"disruptor\", \"naga_siren\", \"luna\", \"necrophos\"],\n  \"events\": [\n    {\"type\": \"ABILITY\", \"game_time\": 1481, \"attacker\": \"earthshaker\", \"ability\": \"earthshaker_echo_slam\", \"value\": 0},\n    {\"type\": \"DAMAGE\", \"game_time\": 1481, \"attacker\": \"earthshaker\", \"target\": \"medusa\", \"ability\": \"earthshaker_echo_slam\", \"value\": 287},\n    {\"type\": \"MODIFIER_ADD\", \"game_time\": 1482, \"attacker\": \"disruptor\", \"target\": \"earthshaker\", \"ability\": \"disruptor_static_storm\"},\n    {\"type\": \"DAMAGE\", \"game_time\": 1485, \"attacker\": \"medusa\", \"target\": \"pangolier\", \"ability\": \"medusa_split_shot\", \"value\": 412},\n    ...\n  ]\n}\n</code></pre></p> <p>LLM responds:</p> <p>The fight at 24:47 was a disaster for Radiant. Here's what happened:</p> <ol> <li> <p>Earthshaker initiated with Echo Slam at 24:41, hitting all 5 Dire heroes but dealing low damage (287 on Medusa) - likely because enemies were spread out</p> </li> <li> <p>Disruptor immediately countered with Static Storm on Earthshaker, silencing him and preventing follow-up</p> </li> <li> <p>Medusa was the problem - she had Split Shot farming Pangolier while tanking the initiation, then cleaned up with 3 kills</p> </li> <li> <p>4 Radiant deaths in 11 seconds - Pangolier, Earthshaker, Nevermore, Dawnbreaker</p> </li> </ol> <p>The issue: Earthshaker jumped in without BKB against a Disruptor. The moment he was silenced, Radiant had no follow-up damage and Medusa shredded everyone.</p>"},{"location":"examples/use-cases/#tracking-carry-farm","title":"Tracking Carry Farm","text":"<p>User: \"How did their Anti-Mage get Battle Fury so fast in match 8461956309?\"</p> <p>LLM calls: <code>get_item_purchases(match_id=8461956309, hero_filter=\"antimage\")</code></p> <p>Tool returns: <pre><code>{\n  \"purchases\": [\n    {\"game_time\": -89, \"game_time_str\": \"-1:29\", \"item\": \"item_tango\"},\n    {\"game_time\": -89, \"game_time_str\": \"-1:29\", \"item\": \"item_quelling_blade\"},\n    {\"game_time\": -89, \"game_time_str\": \"-1:29\", \"item\": \"item_slippers\"},\n    {\"game_time\": 180, \"game_time_str\": \"3:00\", \"item\": \"item_ring_of_health\"},\n    {\"game_time\": 420, \"game_time_str\": \"7:00\", \"item\": \"item_boots\"},\n    {\"game_time\": 540, \"game_time_str\": \"9:00\", \"item\": \"item_bfury\"},\n    {\"game_time\": 780, \"game_time_str\": \"13:00\", \"item\": \"item_manta\"}\n  ]\n}\n</code></pre></p> <p>LLM calls: <code>get_stats_at_minute(match_id=8461956309, minute=9)</code></p> <p>Tool returns: <pre><code>{\n  \"players\": [\n    {\"hero\": \"antimage\", \"last_hits\": 78, \"net_worth\": 5420, \"kills\": 0, \"deaths\": 0},\n    {\"hero\": \"nevermore\", \"last_hits\": 62, \"net_worth\": 4100, \"kills\": 1, \"deaths\": 1}\n  ]\n}\n</code></pre></p> <p>LLM responds:</p> <p>Anti-Mage got a 9-minute Battle Fury, which is quite fast. Here's how:</p> <ul> <li>78 last hits by minute 9 - excellent lane farming</li> <li>0 deaths - completely free lane, no pressure</li> <li>Ring of Health at 3:00 - sustain let him stay in lane indefinitely</li> </ul> <p>Compare to Nevermore mid who had 62 CS but died once - that death probably cost 300-400 gold and 30 seconds of farm.</p> <p>The real question is why Radiant's offlane didn't pressure AM. A 9-minute BFury usually means the safelane was uncontested.</p>"},{"location":"examples/use-cases/#understanding-a-gank","title":"Understanding a Gank","text":"<p>User: \"I was playing Earthshaker and got killed at first blood. What could I have done differently?\"</p> <p>LLM calls: <code>get_hero_deaths(match_id=8461956309)</code></p> <p>Tool returns: <pre><code>{\n  \"deaths\": [\n    {\"game_time\": 288, \"game_time_str\": \"4:48\", \"victim\": \"earthshaker\", \"killer\": \"disruptor\", \"ability\": \"disruptor_thunder_strike\", \"position\": {\"x\": 4200, \"y\": 1800, \"region\": \"dire_safelane\"}}\n  ]\n}\n</code></pre></p> <p>LLM calls: <code>get_fight_combat_log(match_id=8461956309, reference_time=288, hero=\"earthshaker\")</code></p> <p>Tool returns: <pre><code>{\n  \"fight_start\": 280,\n  \"fight_end\": 290,\n  \"participants\": [\"earthshaker\", \"disruptor\", \"naga_siren\", \"medusa\"],\n  \"events\": [\n    {\"type\": \"MODIFIER_ADD\", \"game_time\": 281, \"attacker\": \"naga_siren\", \"target\": \"earthshaker\", \"ability\": \"naga_siren_ensnare\"},\n    {\"type\": \"DAMAGE\", \"game_time\": 282, \"attacker\": \"disruptor\", \"target\": \"earthshaker\", \"ability\": \"disruptor_thunder_strike\", \"value\": 160},\n    {\"type\": \"DAMAGE\", \"game_time\": 284, \"attacker\": \"medusa\", \"target\": \"earthshaker\", \"ability\": \"medusa_mystic_snake\", \"value\": 140},\n    {\"type\": \"DAMAGE\", \"game_time\": 286, \"attacker\": \"naga_siren\", \"target\": \"earthshaker\", \"value\": 58},\n    {\"type\": \"DEATH\", \"game_time\": 288, \"target\": \"earthshaker\", \"attacker\": \"disruptor\"}\n  ]\n}\n</code></pre></p> <p>LLM responds:</p> <p>Here's what happened at first blood (4:48):</p> <ol> <li>Naga Siren caught you with Ensnare at 4:41 - 3-second root</li> <li>Disruptor followed with Thunder Strike - 160 damage over time</li> <li>Medusa hit you with Mystic Snake - another 140 damage</li> <li>You died in 8 seconds without being able to act</li> </ol> <p>Position: You were at x:4200, y:1800 - that's deep in Dire safelane near the tower.</p> <p>What went wrong: You were too far forward against a Naga (root) + Disruptor (slow + damage) dual lane. Once Naga lands Ensnare, you have no escape without Fissure (and even then it's not a disjoint).</p> <p>What to do differently: - Stay near trees for juke paths - Don't contest pulls against this lane - Naga root is too punishing - Play for XP, not kills - ES needs level 6 to fight this lane</p>"},{"location":"examples/use-cases/#objective-control-analysis","title":"Objective Control Analysis","text":"<p>User: \"When did Roshan die and who took the Aegis?\"</p> <p>LLM calls: <code>get_objective_kills(match_id=8461956309)</code></p> <p>Tool returns: <pre><code>{\n  \"roshan_kills\": [\n    {\"game_time\": 1392, \"game_time_str\": \"23:12\", \"killer\": \"medusa\", \"team\": \"dire\", \"kill_number\": 1},\n    {\"game_time\": 2040, \"game_time_str\": \"34:00\", \"killer\": \"medusa\", \"team\": \"dire\", \"kill_number\": 2},\n    {\"game_time\": 2580, \"game_time_str\": \"43:00\", \"killer\": \"luna\", \"team\": \"dire\", \"kill_number\": 3},\n    {\"game_time\": 3120, \"game_time_str\": \"52:00\", \"killer\": \"medusa\", \"team\": \"dire\", \"kill_number\": 4}\n  ],\n  \"tower_kills\": [\n    {\"game_time\": 669, \"game_time_str\": \"11:09\", \"tower\": \"dire_t1_mid\", \"killer\": \"nevermore\"},\n    {\"game_time\": 1440, \"game_time_str\": \"24:00\", \"tower\": \"radiant_t1_bot\", \"killer\": \"medusa\"}\n  ]\n}\n</code></pre></p> <p>LLM responds:</p> <p>Roshan Timeline:</p> Rosh # Time Killer Team 1 23:12 Medusa Dire 2 34:00 Medusa Dire 3 43:00 Luna Dire 4 52:00 Medusa Dire <p>Dire took all 4 Roshans. Medusa got 3 of them personally - she was likely the Aegis carrier for most of the game.</p> <p>This is a big factor in why the game went late - Medusa with Aegis is extremely hard to kill, and Dire maintained complete Roshan control throughout.</p>"},{"location":"examples/use-cases/#comparing-laning-phase","title":"Comparing Laning Phase","text":"<p>User: \"Compare the midlaners at 10 minutes\"</p> <p>LLM calls: <code>get_stats_at_minute(match_id=8461956309, minute=10)</code></p> <p>Tool returns: <pre><code>{\n  \"players\": [\n    {\"hero\": \"nevermore\", \"team\": \"radiant\", \"last_hits\": 68, \"denies\": 12, \"net_worth\": 4800, \"kills\": 2, \"deaths\": 0, \"level\": 11},\n    {\"hero\": \"pangolier\", \"team\": \"dire\", \"last_hits\": 45, \"denies\": 3, \"net_worth\": 3200, \"kills\": 0, \"deaths\": 1, \"level\": 9}\n  ]\n}\n</code></pre></p> <p>LLM responds:</p> <p>Mid Lane at 10:00 - Nevermore vs Pangolier:</p> Stat Nevermore (Radiant) Pangolier (Dire) Last Hits 68 45 Denies 12 3 Net Worth 4,800 3,200 K/D/A 2/0/? 0/1/? Level 11 9 <p>Nevermore dominated the lane: - +23 CS advantage - +9 denies - +1,600 net worth - +2 levels</p> <p>Shadow Fiend's early damage from Necromastery stacks makes him strong in the 1v1. Pangolier likely struggled to last hit under tower after SF established raze control.</p>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.12</li> <li>uv package manager</li> </ul>"},{"location":"getting-started/installation/#install","title":"Install","text":"<pre><code>git clone https://github.com/DeepBlueCoding/mcp_replay_dota2.git\ncd mcp_replay_dota2\nuv sync\n</code></pre>"},{"location":"getting-started/installation/#verify","title":"Verify","text":"<pre><code>uv run python dota_match_mcp_server.py\n</code></pre> <p>You should see: <pre><code>Dota 2 Match MCP Server starting...\nResources: dota2://heroes/all, dota2://map, ...\nTools: get_hero_deaths, get_combat_log, ...\n</code></pre></p>"},{"location":"getting-started/installation/#next-step","title":"Next Step","text":"<p>Connect to your LLM</p>"},{"location":"integrations/","title":"Connecting to LLMs","text":"<p>This MCP server can connect to any LLM that supports the Model Context Protocol or tool calling.</p>"},{"location":"integrations/#native-mcp-support","title":"Native MCP Support","text":"<p>These clients have built-in MCP support:</p> Client Setup Difficulty Best For Claude Desktop Easy Interactive chat with tools Claude Code CLI Easy Development workflows"},{"location":"integrations/#agentic-frameworks","title":"Agentic Frameworks","text":"<p>Use MCP tools with popular agent frameworks:</p> Framework Setup Difficulty Best For LangChain Medium Complex agent pipelines LangGraph Medium Stateful multi-step agents CrewAI Medium Multi-agent collaboration AutoGen Medium Conversational agents"},{"location":"integrations/#direct-api-integration","title":"Direct API Integration","text":"<p>For custom implementations:</p> Method Setup Difficulty Best For FastMCP Client Easy Python scripts MCP SDK Medium Custom clients Anthropic API Hard Full control OpenAI API Hard OpenAI models"},{"location":"integrations/#which-should-i-use","title":"Which Should I Use?","text":"<p>Just want to chat with match analysis? \u2192 Claude Desktop</p> <p>Building a Python application? \u2192 FastMCP Client or LangChain</p> <p>Need complex multi-step analysis? \u2192 LangGraph</p> <p>Want multiple specialized agents? \u2192 CrewAI</p>"},{"location":"integrations/anthropic-api/","title":"Anthropic API","text":"<p>Integrate MCP tools directly with Claude API for full control.</p>"},{"location":"integrations/anthropic-api/#overview","title":"Overview","text":"<p>This approach gives you complete control over the tool calling loop. You define tools for Claude, handle tool calls yourself by calling the MCP server, and return results to Claude.</p>"},{"location":"integrations/anthropic-api/#install","title":"Install","text":"<pre><code>pip install anthropic mcp\n</code></pre>"},{"location":"integrations/anthropic-api/#setup","title":"Setup","text":"<pre><code>import anthropic\nimport asyncio\nimport json\nfrom mcp import ClientSession, StdioServerParameters\nfrom mcp.client.stdio import stdio_client\n\nclient = anthropic.Anthropic()\n\n# Tool definitions for Claude\nTOOLS = [\n    {\n        \"name\": \"get_hero_deaths\",\n        \"description\": \"Get all hero deaths in a Dota 2 match. Returns killer, victim, ability, and timing for each death.\",\n        \"input_schema\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"match_id\": {\n                    \"type\": \"integer\",\n                    \"description\": \"The Dota 2 match ID\"\n                }\n            },\n            \"required\": [\"match_id\"]\n        }\n    },\n    {\n        \"name\": \"get_fight_combat_log\",\n        \"description\": \"Get combat log for a fight around a specific time. Auto-detects fight boundaries.\",\n        \"input_schema\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"match_id\": {\"type\": \"integer\"},\n                \"reference_time\": {\"type\": \"number\", \"description\": \"Game time in seconds\"},\n                \"hero\": {\"type\": \"string\", \"description\": \"Optional hero to anchor detection\"}\n            },\n            \"required\": [\"match_id\", \"reference_time\"]\n        }\n    },\n    {\n        \"name\": \"get_objective_kills\",\n        \"description\": \"Get Roshan, tormentor, tower, and barracks kills.\",\n        \"input_schema\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"match_id\": {\"type\": \"integer\"}\n            },\n            \"required\": [\"match_id\"]\n        }\n    },\n    {\n        \"name\": \"get_item_purchases\",\n        \"description\": \"Get item purchase timings for heroes.\",\n        \"input_schema\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"match_id\": {\"type\": \"integer\"},\n                \"hero_filter\": {\"type\": \"string\", \"description\": \"Optional hero name filter\"}\n            },\n            \"required\": [\"match_id\"]\n        }\n    }\n]\n</code></pre>"},{"location":"integrations/anthropic-api/#mcp-tool-executor","title":"MCP Tool Executor","text":"<pre><code>class MCPToolExecutor:\n    def __init__(self, server_path: str):\n        self.server_path = server_path\n\n    async def execute(self, tool_name: str, tool_input: dict) -&gt; str:\n        server_params = StdioServerParameters(\n            command=\"uv\",\n            args=[\"run\", \"python\", \"dota_match_mcp_server.py\"],\n            cwd=self.server_path\n        )\n\n        async with stdio_client(server_params) as (read, write):\n            async with ClientSession(read, write) as session:\n                await session.initialize()\n                result = await session.call_tool(tool_name, arguments=tool_input)\n                return result.content[0].text\n\nexecutor = MCPToolExecutor(\"/path/to/mcp_replay_dota2\")\n</code></pre>"},{"location":"integrations/anthropic-api/#agentic-loop","title":"Agentic Loop","text":"<pre><code>async def analyze_match(user_message: str):\n    messages = [{\"role\": \"user\", \"content\": user_message}]\n\n    while True:\n        # Call Claude\n        response = client.messages.create(\n            model=\"claude-sonnet-4-20250514\",\n            max_tokens=4096,\n            tools=TOOLS,\n            messages=messages\n        )\n\n        # Check if done\n        if response.stop_reason == \"end_turn\":\n            # Extract final text response\n            for block in response.content:\n                if block.type == \"text\":\n                    return block.text\n            return \"\"\n\n        # Handle tool use\n        if response.stop_reason == \"tool_use\":\n            # Add assistant message\n            messages.append({\"role\": \"assistant\", \"content\": response.content})\n\n            # Process each tool call\n            tool_results = []\n            for block in response.content:\n                if block.type == \"tool_use\":\n                    print(f\"Calling {block.name}({block.input})\")\n\n                    # Execute via MCP\n                    result = await executor.execute(block.name, block.input)\n\n                    tool_results.append({\n                        \"type\": \"tool_result\",\n                        \"tool_use_id\": block.id,\n                        \"content\": result\n                    })\n\n            # Add tool results\n            messages.append({\"role\": \"user\", \"content\": tool_results})\n\n# Run\nresult = asyncio.run(analyze_match(\n    \"Analyze match 8461956309. Focus on the first blood and subsequent laning phase.\"\n))\nprint(result)\n</code></pre>"},{"location":"integrations/anthropic-api/#streaming-response","title":"Streaming Response","text":"<pre><code>async def analyze_match_streaming(user_message: str):\n    messages = [{\"role\": \"user\", \"content\": user_message}]\n\n    while True:\n        with client.messages.stream(\n            model=\"claude-sonnet-4-20250514\",\n            max_tokens=4096,\n            tools=TOOLS,\n            messages=messages\n        ) as stream:\n            response = stream.get_final_message()\n\n        if response.stop_reason == \"end_turn\":\n            for block in response.content:\n                if block.type == \"text\":\n                    print(block.text)\n            break\n\n        if response.stop_reason == \"tool_use\":\n            messages.append({\"role\": \"assistant\", \"content\": response.content})\n\n            tool_results = []\n            for block in response.content:\n                if block.type == \"tool_use\":\n                    result = await executor.execute(block.name, block.input)\n                    tool_results.append({\n                        \"type\": \"tool_result\",\n                        \"tool_use_id\": block.id,\n                        \"content\": result\n                    })\n\n            messages.append({\"role\": \"user\", \"content\": tool_results})\n\nasyncio.run(analyze_match_streaming(\"Why did Radiant lose match 8461956309?\"))\n</code></pre>"},{"location":"integrations/anthropic-api/#with-system-prompt","title":"With System Prompt","text":"<pre><code>SYSTEM_PROMPT = \"\"\"You are an expert Dota 2 analyst. When analyzing matches:\n\n1. Start by getting hero deaths to understand the flow of the game\n2. For important deaths, get the fight combat log to understand what happened\n3. Check objectives to understand macro gameplay\n4. Always explain findings in terms casual players can understand\n\nFocus on actionable insights - what could the losing team have done differently?\"\"\"\n\nresponse = client.messages.create(\n    model=\"claude-sonnet-4-20250514\",\n    max_tokens=4096,\n    system=SYSTEM_PROMPT,\n    tools=TOOLS,\n    messages=[{\"role\": \"user\", \"content\": \"Analyze match 8461956309\"}]\n)\n</code></pre>"},{"location":"integrations/autogen/","title":"AutoGen","text":"<p>Build conversational agents that analyze matches through dialogue.</p>"},{"location":"integrations/autogen/#install-dependencies","title":"Install Dependencies","text":"<pre><code>pip install pyautogen langchain-mcp-adapters\n</code></pre>"},{"location":"integrations/autogen/#setup","title":"Setup","text":"<pre><code>import asyncio\nfrom autogen import AssistantAgent, UserProxyAgent, config_list_from_json\nfrom langchain_mcp_adapters import MCPToolkit\n\n# Connect to MCP server\ntoolkit = MCPToolkit(\n    command=\"uv\",\n    args=[\"run\", \"python\", \"dota_match_mcp_server.py\"],\n    cwd=\"/path/to/mcp_replay_dota2\"\n)\n\n# LLM config\nconfig_list = [{\"model\": \"gpt-4o\", \"api_key\": \"your-api-key\"}]\nllm_config = {\"config_list\": config_list}\n</code></pre>"},{"location":"integrations/autogen/#define-tool-functions","title":"Define Tool Functions","text":"<pre><code>async def get_hero_deaths(match_id: int) -&gt; dict:\n    \"\"\"Get all hero deaths in a Dota 2 match.\"\"\"\n    return await toolkit.acall_tool(\"get_hero_deaths\", {\"match_id\": match_id})\n\nasync def get_fight_combat_log(match_id: int, reference_time: float, hero: str = None) -&gt; dict:\n    \"\"\"Get combat log for a fight around a specific time.\"\"\"\n    return await toolkit.acall_tool(\"get_fight_combat_log\", {\n        \"match_id\": match_id,\n        \"reference_time\": reference_time,\n        \"hero\": hero\n    })\n\nasync def get_objective_kills(match_id: int) -&gt; dict:\n    \"\"\"Get Roshan, tower, and barracks kills.\"\"\"\n    return await toolkit.acall_tool(\"get_objective_kills\", {\"match_id\": match_id})\n</code></pre>"},{"location":"integrations/autogen/#create-agents","title":"Create Agents","text":"<pre><code># Analyst agent with tool access\nanalyst = AssistantAgent(\n    name=\"DotaAnalyst\",\n    system_message=\"\"\"You are an expert Dota 2 analyst. Use the available tools to analyze matches.\n    Always explain your findings in terms casual players can understand.\n    Focus on actionable insights - what could the losing team have done differently?\"\"\",\n    llm_config={\n        **llm_config,\n        \"functions\": [\n            {\n                \"name\": \"get_hero_deaths\",\n                \"description\": \"Get all hero deaths in a match\",\n                \"parameters\": {\n                    \"type\": \"object\",\n                    \"properties\": {\"match_id\": {\"type\": \"integer\"}},\n                    \"required\": [\"match_id\"]\n                }\n            },\n            {\n                \"name\": \"get_fight_combat_log\",\n                \"description\": \"Get combat log for a fight\",\n                \"parameters\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"match_id\": {\"type\": \"integer\"},\n                        \"reference_time\": {\"type\": \"number\"},\n                        \"hero\": {\"type\": \"string\"}\n                    },\n                    \"required\": [\"match_id\", \"reference_time\"]\n                }\n            },\n            {\n                \"name\": \"get_objective_kills\",\n                \"description\": \"Get Roshan and tower kills\",\n                \"parameters\": {\n                    \"type\": \"object\",\n                    \"properties\": {\"match_id\": {\"type\": \"integer\"}},\n                    \"required\": [\"match_id\"]\n                }\n            }\n        ]\n    }\n)\n\n# User proxy that can execute functions\nuser_proxy = UserProxyAgent(\n    name=\"User\",\n    human_input_mode=\"NEVER\",\n    max_consecutive_auto_reply=10,\n    code_execution_config=False,\n    function_map={\n        \"get_hero_deaths\": get_hero_deaths,\n        \"get_fight_combat_log\": get_fight_combat_log,\n        \"get_objective_kills\": get_objective_kills\n    }\n)\n</code></pre>"},{"location":"integrations/autogen/#run-analysis","title":"Run Analysis","text":"<pre><code>async def main():\n    async with toolkit:\n        await user_proxy.a_initiate_chat(\n            analyst,\n            message=\"Analyze match 8461956309. I was playing Earthshaker and we lost. What did I do wrong?\"\n        )\n\nasyncio.run(main())\n</code></pre>"},{"location":"integrations/autogen/#multi-agent-discussion","title":"Multi-Agent Discussion","text":"<p>Create multiple specialists that discuss the match:</p> <pre><code>fight_expert = AssistantAgent(\n    name=\"FightExpert\",\n    system_message=\"You specialize in teamfight analysis. Focus on ability usage and positioning.\",\n    llm_config=llm_config\n)\n\nmacro_expert = AssistantAgent(\n    name=\"MacroExpert\",\n    system_message=\"You specialize in macro gameplay - objectives, map control, and timing.\",\n    llm_config=llm_config\n)\n\n# Group chat for discussion\nfrom autogen import GroupChat, GroupChatManager\n\ngroupchat = GroupChat(\n    agents=[user_proxy, analyst, fight_expert, macro_expert],\n    messages=[],\n    max_round=12\n)\n\nmanager = GroupChatManager(groupchat=groupchat, llm_config=llm_config)\n\nasync def main():\n    async with toolkit:\n        await user_proxy.a_initiate_chat(\n            manager,\n            message=\"Analyze match 8461956309 as a team. Each expert should contribute their specialty.\"\n        )\n\nasyncio.run(main())\n</code></pre>"},{"location":"integrations/claude-code/","title":"Claude Code CLI","text":"<p>Use the Dota 2 MCP server within Claude Code for development workflows.</p>"},{"location":"integrations/claude-code/#project-level-setup","title":"Project-Level Setup","text":"<p>Add to your project's <code>.mcp.json</code>:</p> <pre><code>{\n  \"mcpServers\": {\n    \"dota2\": {\n      \"command\": \"uv\",\n      \"args\": [\"run\", \"python\", \"/absolute/path/to/mcp_replay_dota2/dota_match_mcp_server.py\"]\n    }\n  }\n}\n</code></pre>"},{"location":"integrations/claude-code/#global-setup","title":"Global Setup","text":"<p>Add to <code>~/.claude/settings.json</code> to make it available in all projects:</p> <pre><code>{\n  \"mcpServers\": {\n    \"dota2\": {\n      \"command\": \"uv\",\n      \"args\": [\"run\", \"python\", \"/absolute/path/to/mcp_replay_dota2/dota_match_mcp_server.py\"]\n    }\n  }\n}\n</code></pre>"},{"location":"integrations/claude-code/#verify","title":"Verify","text":"<p>Run Claude Code and check available tools:</p> <pre><code>claude\n&gt; /tools\n</code></pre> <p>You should see the Dota 2 tools listed.</p>"},{"location":"integrations/claude-code/#usage","title":"Usage","text":"<p>In any Claude Code session:</p> <pre><code>&gt; Analyze match 8461956309 and tell me about the first blood\n</code></pre> <p>Claude will use the MCP tools automatically.</p>"},{"location":"integrations/claude-code/#use-case-replay-analysis-scripts","title":"Use Case: Replay Analysis Scripts","text":"<p>You can ask Claude Code to write scripts that use match data:</p> <pre><code>&gt; Write a Python script that analyzes carry farm efficiency using match 8461956309 data\n</code></pre> <p>Claude will call the tools to get real data and generate code that processes it.</p>"},{"location":"integrations/claude-desktop/","title":"Claude Desktop","text":"<p>The simplest way to use this MCP server - just configure and chat.</p>"},{"location":"integrations/claude-desktop/#setup","title":"Setup","text":"<p>Add to your Claude Desktop config file:</p> <p>Linux: <code>~/.config/claude/claude_desktop_config.json</code> macOS: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code> Windows: <code>%APPDATA%\\Claude\\claude_desktop_config.json</code></p> <pre><code>{\n  \"mcpServers\": {\n    \"dota2\": {\n      \"command\": \"uv\",\n      \"args\": [\"run\", \"python\", \"dota_match_mcp_server.py\"],\n      \"cwd\": \"/path/to/mcp_replay_dota2\"\n    }\n  }\n}\n</code></pre>"},{"location":"integrations/claude-desktop/#restart-claude-desktop","title":"Restart Claude Desktop","text":"<p>After saving the config, restart Claude Desktop completely (quit and reopen).</p>"},{"location":"integrations/claude-desktop/#verify-connection","title":"Verify Connection","text":"<p>You should see a hammer icon (\ud83d\udd28) in the chat input area. Click it to see available tools:</p> <ul> <li><code>get_hero_deaths</code></li> <li><code>get_combat_log</code></li> <li><code>get_fight_combat_log</code></li> <li><code>get_item_purchases</code></li> <li><code>get_objective_kills</code></li> <li><code>get_match_timeline</code></li> <li><code>get_stats_at_minute</code></li> <li><code>get_courier_kills</code></li> </ul>"},{"location":"integrations/claude-desktop/#usage","title":"Usage","text":"<p>Just ask naturally:</p> <p>\"Analyze match 8461956309. Why did Radiant lose the fight at 25 minutes?\"</p> <p>Claude will automatically: 1. Call <code>get_hero_deaths</code> to find deaths around that time 2. Call <code>get_fight_combat_log</code> to get fight details 3. Synthesize an analysis</p>"},{"location":"integrations/claude-desktop/#troubleshooting","title":"Troubleshooting","text":"<p>No hammer icon? - Check the config file path is correct - Ensure <code>uv</code> is in your PATH - Check Claude Desktop logs for errors</p> <p>Tools not working? - Verify the <code>cwd</code> path is correct - Try running <code>uv run python dota_match_mcp_server.py</code> manually to check for errors</p>"},{"location":"integrations/crewai/","title":"CrewAI","text":"<p>Build multi-agent systems where specialized agents collaborate on match analysis.</p>"},{"location":"integrations/crewai/#install-dependencies","title":"Install Dependencies","text":"<pre><code>pip install crewai crewai-tools langchain-mcp-adapters\n</code></pre>"},{"location":"integrations/crewai/#setup-mcp-tools-for-crewai","title":"Setup MCP Tools for CrewAI","text":"<pre><code>import asyncio\nfrom crewai import Agent, Task, Crew\nfrom crewai_tools import tool\nfrom langchain_mcp_adapters import MCPToolkit\n\n# Connect to MCP server\ntoolkit = MCPToolkit(\n    command=\"uv\",\n    args=[\"run\", \"python\", \"dota_match_mcp_server.py\"],\n    cwd=\"/path/to/mcp_replay_dota2\"\n)\n\n# Wrap MCP tools as CrewAI tools\n@tool(\"Get Hero Deaths\")\ndef get_hero_deaths(match_id: int) -&gt; dict:\n    \"\"\"Get all hero deaths in a Dota 2 match.\"\"\"\n    return toolkit.call_tool(\"get_hero_deaths\", {\"match_id\": match_id})\n\n@tool(\"Get Fight Combat Log\")\ndef get_fight_combat_log(match_id: int, reference_time: float, hero: str = None) -&gt; dict:\n    \"\"\"Get combat log for a fight around a specific time.\"\"\"\n    return toolkit.call_tool(\"get_fight_combat_log\", {\n        \"match_id\": match_id,\n        \"reference_time\": reference_time,\n        \"hero\": hero\n    })\n\n@tool(\"Get Item Purchases\")\ndef get_item_purchases(match_id: int, hero_filter: str = None) -&gt; dict:\n    \"\"\"Get item purchase timings for heroes.\"\"\"\n    return toolkit.call_tool(\"get_item_purchases\", {\n        \"match_id\": match_id,\n        \"hero_filter\": hero_filter\n    })\n\n@tool(\"Get Objectives\")\ndef get_objective_kills(match_id: int) -&gt; dict:\n    \"\"\"Get Roshan, tower, and barracks kills.\"\"\"\n    return toolkit.call_tool(\"get_objective_kills\", {\"match_id\": match_id})\n</code></pre>"},{"location":"integrations/crewai/#define-specialized-agents","title":"Define Specialized Agents","text":"<pre><code># Agent that analyzes teamfights\nfight_analyst = Agent(\n    role=\"Teamfight Analyst\",\n    goal=\"Analyze teamfights and identify what went wrong or right\",\n    backstory=\"Expert at breaking down Dota 2 teamfights, understanding ability usage and positioning\",\n    tools=[get_hero_deaths, get_fight_combat_log],\n    verbose=True\n)\n\n# Agent that analyzes economy\neconomy_analyst = Agent(\n    role=\"Economy Analyst\",\n    goal=\"Track gold, items, and farm efficiency\",\n    backstory=\"Specialist in Dota 2 economy, item timings, and net worth analysis\",\n    tools=[get_item_purchases],\n    verbose=True\n)\n\n# Agent that tracks objectives\nobjective_analyst = Agent(\n    role=\"Objective Analyst\",\n    goal=\"Track Roshan, towers, and map control\",\n    backstory=\"Expert at macro gameplay, objective timings, and strategic decisions\",\n    tools=[get_objective_kills],\n    verbose=True\n)\n\n# Lead analyst that synthesizes everything\nlead_analyst = Agent(\n    role=\"Lead Analyst\",\n    goal=\"Synthesize analysis from all specialists into actionable insights\",\n    backstory=\"Senior Dota 2 coach who combines tactical and strategic analysis\",\n    verbose=True\n)\n</code></pre>"},{"location":"integrations/crewai/#create-analysis-tasks","title":"Create Analysis Tasks","text":"<pre><code>match_id = 8461956309\n\nfight_task = Task(\n    description=f\"Analyze all major teamfights in match {match_id}. Find the 3 most impactful fights and explain what happened.\",\n    expected_output=\"Detailed breakdown of 3 key teamfights with ability usage and positioning analysis\",\n    agent=fight_analyst\n)\n\neconomy_task = Task(\n    description=f\"Analyze carry item timings in match {match_id}. Compare farming efficiency.\",\n    expected_output=\"Item timing analysis for carries with efficiency comparison\",\n    agent=economy_analyst\n)\n\nobjective_task = Task(\n    description=f\"Track all objective kills in match {match_id}. Analyze Roshan control and tower trading.\",\n    expected_output=\"Timeline of objectives with strategic analysis\",\n    agent=objective_analyst\n)\n\nsynthesis_task = Task(\n    description=\"Combine all analyses into a match report. Identify the key reasons for the outcome.\",\n    expected_output=\"Complete match analysis with 3-5 key takeaways\",\n    agent=lead_analyst,\n    context=[fight_task, economy_task, objective_task]\n)\n</code></pre>"},{"location":"integrations/crewai/#run-the-crew","title":"Run the Crew","text":"<pre><code>crew = Crew(\n    agents=[fight_analyst, economy_analyst, objective_analyst, lead_analyst],\n    tasks=[fight_task, economy_task, objective_task, synthesis_task],\n    verbose=True\n)\n\nasync def main():\n    async with toolkit:\n        result = crew.kickoff()\n        print(result)\n\nasyncio.run(main())\n</code></pre>"},{"location":"integrations/crewai/#example-output","title":"Example Output","text":"<pre><code>[Fight Analyst] Analyzing deaths in match 8461956309...\n[Fight Analyst] Found 45 deaths. Identifying major fights...\n[Fight Analyst] Key fight at 24:47 - 4 deaths in 11 seconds...\n\n[Economy Analyst] Checking item timings...\n[Economy Analyst] Anti-Mage Battle Fury at 9:00 (excellent)\n[Economy Analyst] Medusa Manta at 18:00 (good)\n\n[Objective Analyst] Tracking objectives...\n[Objective Analyst] Dire took all 4 Roshans\n[Objective Analyst] 14 towers destroyed...\n\n[Lead Analyst] Synthesizing analysis...\n\nMATCH ANALYSIS - 8461956309\n===========================\nRadiant lost due to:\n1. Lost Roshan control (0/4)\n2. Teamfight at 24:47 cost them high ground\n3. Medusa snowballed with uncontested farm\n...\n</code></pre>"},{"location":"integrations/fastmcp/","title":"FastMCP Client","text":"<p>The simplest Python integration - use the same library the server is built with.</p>"},{"location":"integrations/fastmcp/#install","title":"Install","text":"<pre><code>pip install fastmcp\n</code></pre>"},{"location":"integrations/fastmcp/#basic-usage","title":"Basic Usage","text":"<pre><code>import asyncio\nfrom fastmcp import Client\n\nasync def main():\n    async with Client(\"uv run python dota_match_mcp_server.py\") as client:\n        # Call tools directly\n        deaths = await client.call_tool(\"get_hero_deaths\", match_id=8461956309)\n        print(f\"Total deaths: {deaths['total_deaths']}\")\n\n        for death in deaths['deaths'][:5]:\n            print(f\"  {death['game_time_str']}: {death['killer']} killed {death['victim']}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"integrations/fastmcp/#working-with-resources","title":"Working with Resources","text":"<pre><code>async def main():\n    async with Client(\"uv run python dota_match_mcp_server.py\") as client:\n        # Get hero data\n        heroes = await client.get_resource(\"dota2://heroes/all\")\n        print(f\"Total heroes: {len(heroes)}\")\n\n        # Get match-specific data\n        match_heroes = await client.get_resource(\"dota2://match/8461956309/heroes\")\n        for hero in match_heroes['heroes']:\n            print(f\"{hero['localized_name']} - {hero['team']} - K/D/A: {hero['kills']}/{hero['deaths']}/{hero['assists']}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"integrations/fastmcp/#complete-analysis-script","title":"Complete Analysis Script","text":"<pre><code>import asyncio\nfrom fastmcp import Client\n\nasync def analyze_match(match_id: int):\n    async with Client(\"uv run python dota_match_mcp_server.py\") as client:\n        # Get all data\n        deaths = await client.call_tool(\"get_hero_deaths\", match_id=match_id)\n        objectives = await client.call_tool(\"get_objective_kills\", match_id=match_id)\n\n        print(f\"\\n=== Match {match_id} Analysis ===\\n\")\n\n        # Deaths summary\n        print(f\"Total Deaths: {deaths['total_deaths']}\")\n\n        # First blood\n        if deaths['deaths']:\n            fb = deaths['deaths'][0]\n            print(f\"First Blood: {fb['game_time_str']} - {fb['killer']} killed {fb['victim']}\")\n\n        # Roshan control\n        rosh = objectives['roshan_kills']\n        print(f\"\\nRoshan Kills: {len(rosh)}\")\n        for r in rosh:\n            print(f\"  Rosh #{r['kill_number']} at {r['game_time_str']} by {r['team']}\")\n\n        # Tower score\n        towers = objectives['tower_kills']\n        radiant_towers = len([t for t in towers if t['team'] == 'radiant'])\n        dire_towers = len([t for t in towers if t['team'] == 'dire'])\n        print(f\"\\nTowers Lost - Radiant: {radiant_towers}, Dire: {dire_towers}\")\n\nif __name__ == \"__main__\":\n    asyncio.run(analyze_match(8461956309))\n</code></pre>"},{"location":"integrations/fastmcp/#error-handling","title":"Error Handling","text":"<pre><code>async def safe_analysis(match_id: int):\n    try:\n        async with Client(\"uv run python dota_match_mcp_server.py\") as client:\n            result = await client.call_tool(\"get_hero_deaths\", match_id=match_id)\n\n            if not result.get('success', True):\n                print(f\"Error: {result.get('error', 'Unknown error')}\")\n                return None\n\n            return result\n\n    except Exception as e:\n        print(f\"Connection error: {e}\")\n        return None\n</code></pre>"},{"location":"integrations/fastmcp/#batch-processing","title":"Batch Processing","text":"<pre><code>async def analyze_multiple_matches(match_ids: list[int]):\n    async with Client(\"uv run python dota_match_mcp_server.py\") as client:\n        results = {}\n\n        for match_id in match_ids:\n            print(f\"Analyzing {match_id}...\")\n            deaths = await client.call_tool(\"get_hero_deaths\", match_id=match_id)\n            objectives = await client.call_tool(\"get_objective_kills\", match_id=match_id)\n\n            results[match_id] = {\n                \"deaths\": deaths['total_deaths'],\n                \"roshans\": len(objectives['roshan_kills']),\n                \"towers\": len(objectives['tower_kills'])\n            }\n\n        return results\n\n# Analyze recent matches\nmatches = [8461956309, 8461956310, 8461956311]\nresults = asyncio.run(analyze_multiple_matches(matches))\n</code></pre>"},{"location":"integrations/langchain/","title":"LangChain","text":"<p>Use MCP tools as LangChain tools with any supported LLM.</p>"},{"location":"integrations/langchain/#install-dependencies","title":"Install Dependencies","text":"<pre><code>pip install langchain langchain-openai langchain-mcp-adapters\n</code></pre>"},{"location":"integrations/langchain/#basic-setup","title":"Basic Setup","text":"<pre><code>import asyncio\nfrom langchain_openai import ChatOpenAI\nfrom langchain_mcp_adapters import MCPToolkit\n\nasync def main():\n    # Connect to MCP server\n    toolkit = MCPToolkit(\n        command=\"uv\",\n        args=[\"run\", \"python\", \"dota_match_mcp_server.py\"],\n        cwd=\"/path/to/mcp_replay_dota2\"\n    )\n\n    async with toolkit:\n        # Get tools as LangChain tools\n        tools = toolkit.get_tools()\n        print(f\"Available tools: {[t.name for t in tools]}\")\n\n        # Use with any LangChain LLM\n        llm = ChatOpenAI(model=\"gpt-4o\")\n        llm_with_tools = llm.bind_tools(tools)\n\n        response = await llm_with_tools.ainvoke(\n            \"What happened at first blood in match 8461956309?\"\n        )\n        print(response)\n\nasyncio.run(main())\n</code></pre>"},{"location":"integrations/langchain/#with-langchain-agents","title":"With LangChain Agents","text":"<pre><code>from langchain.agents import AgentExecutor, create_tool_calling_agent\nfrom langchain_core.prompts import ChatPromptTemplate\n\nasync def main():\n    toolkit = MCPToolkit(\n        command=\"uv\",\n        args=[\"run\", \"python\", \"dota_match_mcp_server.py\"],\n        cwd=\"/path/to/mcp_replay_dota2\"\n    )\n\n    async with toolkit:\n        tools = toolkit.get_tools()\n        llm = ChatOpenAI(model=\"gpt-4o\")\n\n        prompt = ChatPromptTemplate.from_messages([\n            (\"system\", \"You are a Dota 2 analyst. Use the available tools to analyze matches.\"),\n            (\"human\", \"{input}\"),\n            (\"placeholder\", \"{agent_scratchpad}\")\n        ])\n\n        agent = create_tool_calling_agent(llm, tools, prompt)\n        executor = AgentExecutor(agent=agent, tools=tools, verbose=True)\n\n        result = await executor.ainvoke({\n            \"input\": \"Analyze the teamfight at 25 minutes in match 8461956309\"\n        })\n        print(result[\"output\"])\n\nasyncio.run(main())\n</code></pre>"},{"location":"integrations/langchain/#with-claude-via-langchain","title":"With Claude via LangChain","text":"<pre><code>from langchain_anthropic import ChatAnthropic\n\nllm = ChatAnthropic(model=\"claude-sonnet-4-20250514\")\nllm_with_tools = llm.bind_tools(tools)\n</code></pre>"},{"location":"integrations/langchain/#tool-descriptions","title":"Tool Descriptions","text":"<p>The MCP adapter preserves tool descriptions, so the LLM knows when to use each tool:</p> Tool LangChain Description <code>get_hero_deaths</code> Get all hero deaths in a Dota 2 match <code>get_fight_combat_log</code> Get combat log for a fight around a specific time <code>get_item_purchases</code> Get item purchase timings for heroes"},{"location":"integrations/langgraph/","title":"LangGraph","text":"<p>Build stateful, multi-step Dota 2 analysis agents with LangGraph.</p>"},{"location":"integrations/langgraph/#install-dependencies","title":"Install Dependencies","text":"<pre><code>pip install langgraph langchain-openai langchain-mcp-adapters\n</code></pre>"},{"location":"integrations/langgraph/#react-agent","title":"ReAct Agent","text":"<p>The simplest LangGraph agent - reasons and acts in a loop:</p> <pre><code>import asyncio\nfrom langchain_openai import ChatOpenAI\nfrom langchain_mcp_adapters import MCPToolkit\nfrom langgraph.prebuilt import create_react_agent\n\nasync def main():\n    toolkit = MCPToolkit(\n        command=\"uv\",\n        args=[\"run\", \"python\", \"dota_match_mcp_server.py\"],\n        cwd=\"/path/to/mcp_replay_dota2\"\n    )\n\n    async with toolkit:\n        tools = toolkit.get_tools()\n        llm = ChatOpenAI(model=\"gpt-4o\")\n\n        # Create ReAct agent\n        agent = create_react_agent(llm, tools)\n\n        # Run analysis\n        response = await agent.ainvoke({\n            \"messages\": [{\n                \"role\": \"user\",\n                \"content\": \"Analyze match 8461956309. First get all deaths, then analyze the biggest teamfight.\"\n            }]\n        })\n\n        print(response[\"messages\"][-1].content)\n\nasyncio.run(main())\n</code></pre>"},{"location":"integrations/langgraph/#custom-graph-for-match-analysis","title":"Custom Graph for Match Analysis","text":"<p>Build a specialized graph that follows a specific analysis flow:</p> <pre><code>from langgraph.graph import StateGraph, END\nfrom typing import TypedDict, Annotated\nimport operator\n\nclass AnalysisState(TypedDict):\n    match_id: int\n    deaths: list\n    fights: list\n    objectives: list\n    analysis: str\n    messages: Annotated[list, operator.add]\n\ndef get_deaths(state: AnalysisState):\n    # Call get_hero_deaths tool\n    deaths = tools[\"get_hero_deaths\"].invoke({\"match_id\": state[\"match_id\"]})\n    return {\"deaths\": deaths[\"deaths\"]}\n\ndef identify_fights(state: AnalysisState):\n    # Find clusters of deaths = teamfights\n    fights = []\n    for death in state[\"deaths\"]:\n        fight = tools[\"get_fight_combat_log\"].invoke({\n            \"match_id\": state[\"match_id\"],\n            \"reference_time\": death[\"game_time\"],\n            \"hero\": death[\"victim\"]\n        })\n        if fight[\"duration\"] &gt; 10 and len(fight[\"participants\"]) &gt; 4:\n            fights.append(fight)\n    return {\"fights\": fights}\n\ndef get_objectives(state: AnalysisState):\n    objectives = tools[\"get_objective_kills\"].invoke({\"match_id\": state[\"match_id\"]})\n    return {\"objectives\": objectives}\n\ndef synthesize(state: AnalysisState):\n    # Use LLM to synthesize analysis\n    prompt = f\"\"\"Analyze this match:\n    - {len(state['deaths'])} total deaths\n    - {len(state['fights'])} major teamfights\n    - Roshan kills: {len(state['objectives']['roshan_kills'])}\n    - Towers: {len(state['objectives']['tower_kills'])}\n\n    Key fights: {state['fights'][:3]}\n    \"\"\"\n    response = llm.invoke(prompt)\n    return {\"analysis\": response.content}\n\n# Build graph\ngraph = StateGraph(AnalysisState)\ngraph.add_node(\"get_deaths\", get_deaths)\ngraph.add_node(\"identify_fights\", identify_fights)\ngraph.add_node(\"get_objectives\", get_objectives)\ngraph.add_node(\"synthesize\", synthesize)\n\ngraph.set_entry_point(\"get_deaths\")\ngraph.add_edge(\"get_deaths\", \"identify_fights\")\ngraph.add_edge(\"get_deaths\", \"get_objectives\")  # parallel\ngraph.add_edge(\"identify_fights\", \"synthesize\")\ngraph.add_edge(\"get_objectives\", \"synthesize\")\ngraph.add_edge(\"synthesize\", END)\n\napp = graph.compile()\n</code></pre>"},{"location":"integrations/langgraph/#streaming-results","title":"Streaming Results","text":"<p>LangGraph supports streaming for long analyses:</p> <pre><code>async for event in agent.astream_events(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"Full analysis of match 8461956309\"}]},\n    version=\"v2\"\n):\n    if event[\"event\"] == \"on_chat_model_stream\":\n        print(event[\"data\"][\"chunk\"].content, end=\"\", flush=True)\n</code></pre>"},{"location":"integrations/mcp-sdk/","title":"MCP SDK","text":"<p>Use the official MCP Python SDK for low-level control.</p>"},{"location":"integrations/mcp-sdk/#install","title":"Install","text":"<pre><code>pip install mcp\n</code></pre>"},{"location":"integrations/mcp-sdk/#basic-client","title":"Basic Client","text":"<pre><code>import asyncio\nfrom mcp import ClientSession, StdioServerParameters\nfrom mcp.client.stdio import stdio_client\n\nasync def main():\n    server_params = StdioServerParameters(\n        command=\"uv\",\n        args=[\"run\", \"python\", \"dota_match_mcp_server.py\"],\n        cwd=\"/path/to/mcp_replay_dota2\"\n    )\n\n    async with stdio_client(server_params) as (read, write):\n        async with ClientSession(read, write) as session:\n            # Initialize connection\n            await session.initialize()\n\n            # List available tools\n            tools = await session.list_tools()\n            print(\"Available tools:\")\n            for tool in tools.tools:\n                print(f\"  - {tool.name}: {tool.description}\")\n\n            # List available resources\n            resources = await session.list_resources()\n            print(\"\\nAvailable resources:\")\n            for resource in resources.resources:\n                print(f\"  - {resource.uri}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"integrations/mcp-sdk/#calling-tools","title":"Calling Tools","text":"<pre><code>async def call_tool_example():\n    server_params = StdioServerParameters(\n        command=\"uv\",\n        args=[\"run\", \"python\", \"dota_match_mcp_server.py\"],\n        cwd=\"/path/to/mcp_replay_dota2\"\n    )\n\n    async with stdio_client(server_params) as (read, write):\n        async with ClientSession(read, write) as session:\n            await session.initialize()\n\n            # Call get_hero_deaths\n            result = await session.call_tool(\n                \"get_hero_deaths\",\n                arguments={\"match_id\": 8461956309}\n            )\n\n            # Result is a list of content blocks\n            for content in result.content:\n                if content.type == \"text\":\n                    import json\n                    data = json.loads(content.text)\n                    print(f\"Total deaths: {data['total_deaths']}\")\n\nasyncio.run(call_tool_example())\n</code></pre>"},{"location":"integrations/mcp-sdk/#reading-resources","title":"Reading Resources","text":"<pre><code>async def read_resource_example():\n    server_params = StdioServerParameters(\n        command=\"uv\",\n        args=[\"run\", \"python\", \"dota_match_mcp_server.py\"],\n        cwd=\"/path/to/mcp_replay_dota2\"\n    )\n\n    async with stdio_client(server_params) as (read, write):\n        async with ClientSession(read, write) as session:\n            await session.initialize()\n\n            # Read hero resource\n            result = await session.read_resource(\"dota2://heroes/all\")\n\n            for content in result.contents:\n                if content.mimeType == \"application/json\":\n                    import json\n                    heroes = json.loads(content.text)\n                    print(f\"Total heroes: {len(heroes)}\")\n\nasyncio.run(read_resource_example())\n</code></pre>"},{"location":"integrations/mcp-sdk/#building-a-custom-client-class","title":"Building a Custom Client Class","text":"<pre><code>import json\nfrom mcp import ClientSession, StdioServerParameters\nfrom mcp.client.stdio import stdio_client\n\nclass Dota2MCPClient:\n    def __init__(self, server_path: str):\n        self.server_params = StdioServerParameters(\n            command=\"uv\",\n            args=[\"run\", \"python\", \"dota_match_mcp_server.py\"],\n            cwd=server_path\n        )\n        self._session = None\n        self._read = None\n        self._write = None\n\n    async def __aenter__(self):\n        transport = stdio_client(self.server_params)\n        self._read, self._write = await transport.__aenter__()\n        self._session = ClientSession(self._read, self._write)\n        await self._session.__aenter__()\n        await self._session.initialize()\n        return self\n\n    async def __aexit__(self, *args):\n        if self._session:\n            await self._session.__aexit__(*args)\n\n    async def get_hero_deaths(self, match_id: int) -&gt; dict:\n        result = await self._session.call_tool(\n            \"get_hero_deaths\",\n            arguments={\"match_id\": match_id}\n        )\n        return json.loads(result.content[0].text)\n\n    async def get_objectives(self, match_id: int) -&gt; dict:\n        result = await self._session.call_tool(\n            \"get_objective_kills\",\n            arguments={\"match_id\": match_id}\n        )\n        return json.loads(result.content[0].text)\n\n    async def get_fight(self, match_id: int, time: float, hero: str = None) -&gt; dict:\n        args = {\"match_id\": match_id, \"reference_time\": time}\n        if hero:\n            args[\"hero\"] = hero\n        result = await self._session.call_tool(\"get_fight_combat_log\", arguments=args)\n        return json.loads(result.content[0].text)\n\n# Usage\nasync def main():\n    async with Dota2MCPClient(\"/path/to/mcp_replay_dota2\") as client:\n        deaths = await client.get_hero_deaths(8461956309)\n        print(f\"Deaths: {deaths['total_deaths']}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"integrations/openai-api/","title":"OpenAI API","text":"<p>Use MCP tools with OpenAI models (GPT-4, GPT-4o, etc.).</p>"},{"location":"integrations/openai-api/#install","title":"Install","text":"<pre><code>pip install openai mcp\n</code></pre>"},{"location":"integrations/openai-api/#setup","title":"Setup","text":"<pre><code>from openai import OpenAI\nimport asyncio\nimport json\nfrom mcp import ClientSession, StdioServerParameters\nfrom mcp.client.stdio import stdio_client\n\nclient = OpenAI()\n\n# Tool definitions for OpenAI\nTOOLS = [\n    {\n        \"type\": \"function\",\n        \"function\": {\n            \"name\": \"get_hero_deaths\",\n            \"description\": \"Get all hero deaths in a Dota 2 match\",\n            \"parameters\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"match_id\": {\"type\": \"integer\", \"description\": \"The Dota 2 match ID\"}\n                },\n                \"required\": [\"match_id\"]\n            }\n        }\n    },\n    {\n        \"type\": \"function\",\n        \"function\": {\n            \"name\": \"get_fight_combat_log\",\n            \"description\": \"Get combat log for a fight around a specific time\",\n            \"parameters\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"match_id\": {\"type\": \"integer\"},\n                    \"reference_time\": {\"type\": \"number\"},\n                    \"hero\": {\"type\": \"string\"}\n                },\n                \"required\": [\"match_id\", \"reference_time\"]\n            }\n        }\n    },\n    {\n        \"type\": \"function\",\n        \"function\": {\n            \"name\": \"get_objective_kills\",\n            \"description\": \"Get Roshan, tower, and barracks kills\",\n            \"parameters\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"match_id\": {\"type\": \"integer\"}\n                },\n                \"required\": [\"match_id\"]\n            }\n        }\n    },\n    {\n        \"type\": \"function\",\n        \"function\": {\n            \"name\": \"get_item_purchases\",\n            \"description\": \"Get item purchase timings\",\n            \"parameters\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"match_id\": {\"type\": \"integer\"},\n                    \"hero_filter\": {\"type\": \"string\"}\n                },\n                \"required\": [\"match_id\"]\n            }\n        }\n    }\n]\n</code></pre>"},{"location":"integrations/openai-api/#mcp-tool-executor","title":"MCP Tool Executor","text":"<pre><code>class MCPToolExecutor:\n    def __init__(self, server_path: str):\n        self.server_path = server_path\n\n    async def execute(self, tool_name: str, tool_args: dict) -&gt; str:\n        server_params = StdioServerParameters(\n            command=\"uv\",\n            args=[\"run\", \"python\", \"dota_match_mcp_server.py\"],\n            cwd=self.server_path\n        )\n\n        async with stdio_client(server_params) as (read, write):\n            async with ClientSession(read, write) as session:\n                await session.initialize()\n                result = await session.call_tool(tool_name, arguments=tool_args)\n                return result.content[0].text\n\nexecutor = MCPToolExecutor(\"/path/to/mcp_replay_dota2\")\n</code></pre>"},{"location":"integrations/openai-api/#agentic-loop","title":"Agentic Loop","text":"<pre><code>async def analyze_match(user_message: str):\n    messages = [\n        {\"role\": \"system\", \"content\": \"You are an expert Dota 2 analyst. Use the available tools to analyze matches and provide insights.\"},\n        {\"role\": \"user\", \"content\": user_message}\n    ]\n\n    while True:\n        response = client.chat.completions.create(\n            model=\"gpt-4o\",\n            messages=messages,\n            tools=TOOLS,\n            tool_choice=\"auto\"\n        )\n\n        message = response.choices[0].message\n\n        # Check if done\n        if message.tool_calls is None:\n            return message.content\n\n        # Add assistant message\n        messages.append(message)\n\n        # Process tool calls\n        for tool_call in message.tool_calls:\n            print(f\"Calling {tool_call.function.name}...\")\n\n            # Parse arguments\n            args = json.loads(tool_call.function.arguments)\n\n            # Execute via MCP\n            result = await executor.execute(tool_call.function.name, args)\n\n            # Add tool result\n            messages.append({\n                \"role\": \"tool\",\n                \"tool_call_id\": tool_call.id,\n                \"content\": result\n            })\n\n# Run\nresult = asyncio.run(analyze_match(\"Analyze match 8461956309. What happened at first blood?\"))\nprint(result)\n</code></pre>"},{"location":"integrations/openai-api/#streaming","title":"Streaming","text":"<pre><code>async def analyze_match_streaming(user_message: str):\n    messages = [\n        {\"role\": \"system\", \"content\": \"You are an expert Dota 2 analyst.\"},\n        {\"role\": \"user\", \"content\": user_message}\n    ]\n\n    while True:\n        stream = client.chat.completions.create(\n            model=\"gpt-4o\",\n            messages=messages,\n            tools=TOOLS,\n            stream=True\n        )\n\n        tool_calls = []\n        content = \"\"\n\n        for chunk in stream:\n            delta = chunk.choices[0].delta\n\n            if delta.content:\n                print(delta.content, end=\"\", flush=True)\n                content += delta.content\n\n            if delta.tool_calls:\n                for tc in delta.tool_calls:\n                    if tc.index &gt;= len(tool_calls):\n                        tool_calls.append({\"id\": \"\", \"name\": \"\", \"arguments\": \"\"})\n                    if tc.id:\n                        tool_calls[tc.index][\"id\"] = tc.id\n                    if tc.function.name:\n                        tool_calls[tc.index][\"name\"] = tc.function.name\n                    if tc.function.arguments:\n                        tool_calls[tc.index][\"arguments\"] += tc.function.arguments\n\n        if not tool_calls:\n            print()\n            return content\n\n        # Process tool calls\n        messages.append({\n            \"role\": \"assistant\",\n            \"content\": content,\n            \"tool_calls\": [\n                {\n                    \"id\": tc[\"id\"],\n                    \"type\": \"function\",\n                    \"function\": {\"name\": tc[\"name\"], \"arguments\": tc[\"arguments\"]}\n                }\n                for tc in tool_calls\n            ]\n        })\n\n        for tc in tool_calls:\n            args = json.loads(tc[\"arguments\"])\n            result = await executor.execute(tc[\"name\"], args)\n            messages.append({\n                \"role\": \"tool\",\n                \"tool_call_id\": tc[\"id\"],\n                \"content\": result\n            })\n\nasyncio.run(analyze_match_streaming(\"Full analysis of match 8461956309\"))\n</code></pre>"},{"location":"integrations/openai-api/#with-parallel-tool-calls","title":"With Parallel Tool Calls","text":"<p>GPT-4o can request multiple tools in parallel:</p> <pre><code># The agentic loop above handles this automatically\n# GPT-4o will return multiple tool_calls when it wants parallel execution\n\n# Example response structure:\n# message.tool_calls = [\n#     ToolCall(id=\"1\", function=Function(name=\"get_hero_deaths\", arguments=\"{\\\"match_id\\\": 8461956309}\")),\n#     ToolCall(id=\"2\", function=Function(name=\"get_objective_kills\", arguments=\"{\\\"match_id\\\": 8461956309}\"))\n# ]\n</code></pre>"}]}